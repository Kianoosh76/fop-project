{% extends 'base.html' %}

{% block content %}
    <div class="container" style="background-color: white">
    <h2>This is Fop Project!</h2>
    <table title="teams">
        <thead>
        <th>Team name</th>
        <th>Members</th>
        <th>
        {% if request.user.team %}
            Who are you for voting?
            <select>
                {% for member in request.user.team.members.all %}
                <option value="{{member.student_id}}">{{member.name}}</option>
                {% endfor %}
            </select>
        {% else %}
            Please login your team to like/dislike
        {% endif%}
        </th>
        </thead>
        <tbody>
        {% for team in teams %}
        <tr>
            <td>{{team.name}}</td>
            <input type="hidden" id="team-forloop.counter" value="team.username">
            {% with team.members.count as count %}
            {% for member in team.members.all %}

                {% if forloop.counter <= 2 %}
                    <td>
                {% endif %}

                {{member.name}}

                {% if forloop.counter > 1 and forloop.counter < count %}
                    <br>
                {% endif %}

                {% if forloop.counter == 1 or forloop.counter == count %}
                    </td>
                {% endif %}

            {% endfor %}
            {% endwith %}
            <td>
                <a href="#"><span class="glyphicon glyphicon-heart" id="like-forloop.counter">tmp like</span></a>
                <span id="votes-forloop.counter">{{team.votes}}</span>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>
{% endblock %}